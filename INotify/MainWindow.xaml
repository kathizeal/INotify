<Window
    x:Class="INotify.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:INotify"
    xmlns:controls="using:INotify.Controls"
    xmlns:viewmodels="using:INotify.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:view="using:INotify.KToastView.View" xmlns:applist="using:AppList" xmlns:view1="using:INotify.View"
    mc:Ignorable="d"
    Title="INotify - Smart Notification Manager">
    
    
    <Grid>
        <Grid.Resources>
            <ResourceDictionary>
                <Style x:Key="CustomFlyoutPresenter" TargetType="FlyoutPresenter">
                    <!-- Remove width constraints -->
                    <Setter Property="MaxWidth" Value="Infinity"/>

                    <!-- Disable horizontal scrolling -->
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                    <!-- Optional: Also disable vertical scrolling if needed -->
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled"/>
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
                </Style>

                <!-- You can add more resources here -->
                <SolidColorBrush x:Key="MyBrush" Color="Blue"/>
            </ResourceDictionary>
        </Grid.Resources>
        <NavigationView x:Name="MainNavigationView" 
                       PaneDisplayMode="Left"
                       IsBackButtonVisible="Collapsed"
                       IsSettingsVisible="True"
                       CompactModeThresholdWidth="320"
                       OpenPaneLength="280"
                       SelectionChanged="MainNavigationView_SelectionChanged"
                       Header="Smart Notification Manager">
            
            <!-- Menu Items -->
            <NavigationView.MenuItems>
                <!-- Priority Section -->
                <NavigationViewItem x:Name="PriorityMenuItem" 
                                  Content="Priority" 
                                  Icon="Important"
                                  Tag="Priority">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem x:Name="HighPriorityMenuItem" 
                                          Content="High Priority" 
                                          Icon="Upload"
                                          Tag="Priority_High"/>
                        <NavigationViewItem x:Name="MediumPriorityMenuItem" 
                                          Content="Medium Priority" 
                                          Icon="Remove"
                                          Tag="Priority_Medium"/>
                        <NavigationViewItem x:Name="LowPriorityMenuItem" 
                                          Content="Low Priority" 
                                          Icon="Download"
                                          Tag="Priority_Low"/>
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <!-- Space Section -->
                <NavigationViewItem x:Name="SpaceMenuItem" 
                                  Content="Space" 
                                  Icon="ViewAll"
                                  Tag="Space">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem x:Name="Space1MenuItem" 
                                          Content="Space 1" 
                                          Icon="Emoji2"
                                          Tag="Space_1"/>
                        <NavigationViewItem x:Name="Space2MenuItem" 
                                          Content="Space 2" 
                                          Icon="Emoji2"
                                          Tag="Space_2"/>
                        <NavigationViewItem x:Name="Space3MenuItem" 
                                          Content="Space 3" 
                                          Icon="Emoji2"
                                          Tag="Space_3"/>
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <!-- All Apps Section -->
                <NavigationViewItem x:Name="AllAppsMenuItem" 
                                  Content="All Apps" 
                                  Icon="AllApps"
                                  Tag="AllApps"/>

                <!-- All Notifications Section -->
                <NavigationViewItem x:Name="AllNotificationsMenuItem" 
                                  Content="All Notifications" 
                                  Icon="Message"
                                  Tag="AllNotifications"/>
            </NavigationView.MenuItems>

            <!-- Footer Menu Items -->
            <NavigationView.FooterMenuItems>
                <NavigationViewItem x:Name="DndMenuItem" 
                                  Content="Do Not Disturb" 
                                  Icon="DisconnectDrive"
                                  Tag="DND"/>
                <NavigationViewItem x:Name="StatusMenuItem" 
                                  Content="Status" 
                                  Icon="Flag"
                                  Tag="Status"/>
            </NavigationView.FooterMenuItems>

            <!-- Content Area (Right Pane) -->
            <Grid x:Name="ContentArea" Margin="24,24,24,24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header Section -->
                <StackPanel x:Name="ContentHeader" 
                           Grid.Row="0" 
                           Margin="0,0,0,24">
                    <TextBlock x:Name="ContentTitle" 
                              Text="Welcome to INotify"
                              Style="{StaticResource TitleTextBlockStyle}"
                              Margin="0,0,0,8"/>
                    <TextBlock x:Name="ContentSubtitle" 
                              Text="Select a category from the menu to get started"
                              Style="{StaticResource SubtitleTextBlockStyle}"
                              Foreground="{ThemeResource SystemColorGrayTextBrush}"/>
                </StackPanel>

                <!-- Main Content Area -->
                <ScrollViewer x:Name="MainContentScrollViewer" 
                             Grid.Row="1"
                             ZoomMode="Disabled"
                             HorizontalScrollMode="Auto"
                             HorizontalScrollBarVisibility="Auto"
                             VerticalScrollMode="Auto"
                             VerticalScrollBarVisibility="Auto">

                    <!-- Content Container Grid -->
                    <Grid x:Name="ContentContainer">
                        <!-- Priority Board View (Initially Hidden) -->
                        <Grid x:Name="PriorityBoardView" Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- High Priority Column -->
                            <Border Grid.Column="0" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="0,0,12,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="High Priority" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="HighPriorityListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddHighPriorityBtn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToPriority_Click"
                                           Tag="High">
                                        <Button.Flyout>
                                            <Flyout x:Name="HighPriorityFlyout" FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="HighPriorityAppSelector" SelectionTypeId="High" CurrentTargetType="Priority"/>
                                            </Flyout>
                                            
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- Medium Priority Column -->
                            <Border Grid.Column="1" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="6,0,6,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="Medium Priority" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="MediumPriorityListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddMediumPriorityBtn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToPriority_Click"
                                           Tag="Medium">
                                        <Button.Flyout>
                                            <Flyout x:Name="MediumPriorityFlyout" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="MediumPriorityAppSelector" SelectionTypeId="Medium" CurrentTargetType="Priority"/>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- Low Priority Column -->
                            <Border Grid.Column="2" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="12,0,0,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="Low Priority" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="LowPriorityListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddLowPriorityBtn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToPriority_Click"
                                           Tag="Low">
                                        <Button.Flyout>
                                            <Flyout x:Name="LowPriorityFlyout" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="LowPriorityAppSelector" SelectionTypeId="Low" CurrentTargetType="Priority"/>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Space Board View (Initially Hidden) -->
                        <Grid x:Name="SpaceBoardView" Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Space 1 Column -->
                            <Border Grid.Column="0" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="0,0,12,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="Space 1" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="Space1ListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddSpace1Btn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToSpace_Click"
                                           Tag="Space1">
                                        <Button.Flyout>
                                            <Flyout x:Name="Space1Flyout" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="Space1AppSelector" SelectionTypeId="Space1" CurrentTargetType="Space"/>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- Space 2 Column -->
                            <Border Grid.Column="1" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="6,0,6,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="Space 2" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="Space2ListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddSpace2Btn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToSpace_Click"
                                           Tag="Space2">
                                        <Button.Flyout>
                                            <Flyout x:Name="Space2Flyout" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="Space2AppSelector" CurrentTargetType="Space" SelectionTypeId="Space2" />
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- Space 3 Column -->
                            <Border Grid.Column="2" 
                                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                   CornerRadius="8"
                                   Margin="12,0,0,0"
                                   Padding="16">
                                <StackPanel>
                                    <TextBlock Text="Space 3" 
                                              FontWeight="SemiBold"
                                              Margin="0,0,0,12"/>
                                    <ListView x:Name="Space3ListView"
                                             MaxHeight="400">
                                        <!-- Items will be populated from code-behind -->
                                    </ListView>
                                    <Button x:Name="AddSpace3Btn"
                                           Content="+ Add Apps"
                                           Style="{StaticResource AccentButtonStyle}"
                                           HorizontalAlignment="Stretch"
                                           Margin="0,12,0,0"
                                           Click="AddToSpace_Click"
                                           Tag="Space3">
                                        <Button.Flyout>
                                            <Flyout x:Name="Space3Flyout" Placement="Bottom">
                                                <controls:AppSelectionFlyoutControl x:Name="Space3AppSelector" CurrentTargetType="Space" SelectionTypeId="Space3" />
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Detail List View (Initially Hidden) -->
                        <Grid x:Name="DetailListView" Visibility="Collapsed">
                            <ListView x:Name="DetailListViewContent"
                                     SelectionMode="Single">
                                <!-- Items will be populated from code-behind -->
                            </ListView>
                        </Grid>

                        <!-- All Apps View (Initially Hidden) -->
                        <Grid x:Name="AllAppsView" Visibility="Collapsed">
                            <view1:AllPackageControl/>
                        </Grid>

                        <!-- All Notifications View (Initially Hidden) -->
                        <Grid x:Name="AllNotificationsView" Visibility="Collapsed">
                            <!-- This will be populated with the existing KToastListViewControl -->
                            <view:KToastListControl x:Name="KToastListViewControl"/>
                        </Grid>

                        <!-- DND Control View (Initially Hidden) -->
                        <Grid x:Name="DndControlView" Visibility="Collapsed">
                            <StackPanel Spacing="16">
                                <TextBlock Text="Do Not Disturb Settings" 
                                          Style="{StaticResource SubheaderTextBlockStyle}"/>
                                
                                <StackPanel Spacing="8">
                                    <TextBlock x:Name="DndStatusText" 
                                              Text="Loading DND status..."
                                              FontWeight="SemiBold"/>
                                    
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Button x:Name="ToggleDndButton"
                                               Content="Toggle DND"
                                               Click="ToggleDnd_Click"/>
                                        <Button x:Name="SetAlarmsOnlyButton"
                                               Content="Alarms Only"
                                               Click="SetAlarmsOnly_Click"/>
                                        <Button x:Name="ShowDndStatusButton"
                                               Content="Show Status"
                                               Click="ShowDndStatus_Click"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Grid>

                        <!-- Status View (Initially Hidden) -->
                        <Grid x:Name="StatusView" Visibility="Collapsed">
                            <StackPanel Spacing="16">
                                <TextBlock Text="System Status" 
                                          Style="{StaticResource SubheaderTextBlockStyle}"/>
                                
                                <StackPanel Spacing="8">
                                    <TextBlock x:Name="TotalNotificationsText" 
                                              Text="Total Notifications: 0"/>
                                    <TextBlock x:Name="PriorityAppsCountText" 
                                              Text="Priority Apps: 0"/>
                                    <TextBlock x:Name="ActiveSpacesText" 
                                              Text="Active Spaces: 0"/>
                                </StackPanel>

                                <Button Content="Open Diagnostics"
                                       Click="Diagnostics_Click"/>
                            </StackPanel>
                        </Grid>
                    </Grid>

                </ScrollViewer>
            </Grid>
        </NavigationView>
    </Grid>
</Window>