<Window
    x:Class="INotify.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:applist="using:AppList"
    xmlns:controls="using:INotify.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:INotify"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:view="using:INotify.KToastView.View"
    xmlns:view1="using:INotify.View"
    xmlns:viewmodels="using:INotify.ViewModels"
    Title="INotify - Smart Notification Manager"
    mc:Ignorable="d">


    <Grid>
        <Grid.Resources>
            <ResourceDictionary>
                <Style x:Key="CustomFlyoutPresenter" TargetType="FlyoutPresenter">
                    <!--  Remove width constraints  -->
                    <Setter Property="MaxWidth" Value="Infinity" />

                    <!--  Disable horizontal scrolling  -->
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />

                    <!--  Optional: Also disable vertical scrolling if needed  -->
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />
                </Style>

                <!--  You can add more resources here  -->
                <SolidColorBrush x:Key="MyBrush" Color="Blue" />
            </ResourceDictionary>
        </Grid.Resources>
        <NavigationView
            x:Name="MainNavigationView"
            CompactModeThresholdWidth="320"
            Header="Smart Notification Manager"
            IsBackButtonVisible="Collapsed"
            IsSettingsVisible="True"
            OpenPaneLength="280"
            PaneDisplayMode="Left"
            SelectionChanged="MainNavigationView_SelectionChanged">

            <!--  Menu Items  -->
            <NavigationView.MenuItems>
                <!--  Priority Section  -->
                <NavigationViewItem
                    x:Name="PriorityMenuItem"
                    Content="Priority"
                    Icon="Important"
                    Tag="Priority">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem
                            x:Name="HighPriorityMenuItem"
                            Content="High Priority"
                            Icon="Upload"
                            Tag="Priority_High" />
                        <NavigationViewItem
                            x:Name="MediumPriorityMenuItem"
                            Content="Medium Priority"
                            Icon="Remove"
                            Tag="Priority_Medium" />
                        <NavigationViewItem
                            x:Name="LowPriorityMenuItem"
                            Content="Low Priority"
                            Icon="Download"
                            Tag="Priority_Low" />
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <!--  Space Section  -->
                <NavigationViewItem
                    x:Name="SpaceMenuItem"
                    Content="Space"
                    Icon="ViewAll"
                    Tag="Space">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem
                            x:Name="Space1MenuItem"
                            Content="Space 1"
                            Icon="Emoji2"
                            Tag="Space_1" />
                        <NavigationViewItem
                            x:Name="Space2MenuItem"
                            Content="Space 2"
                            Icon="Emoji2"
                            Tag="Space_2" />
                        <NavigationViewItem
                            x:Name="Space3MenuItem"
                            Content="Space 3"
                            Icon="Emoji2"
                            Tag="Space_3" />
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <!--  All Apps Section  -->
                <NavigationViewItem
                    x:Name="AllAppsMenuItem"
                    Content="All Apps"
                    Icon="AllApps"
                    Tag="AllApps" />

                <!--  All Notifications Section  -->
                <NavigationViewItem
                    x:Name="AllNotificationsMenuItem"
                    Content="All Notifications"
                    Icon="Message"
                    Tag="AllNotifications" />
            </NavigationView.MenuItems>

            <!--  Footer Menu Items  -->
            <NavigationView.FooterMenuItems>
                <NavigationViewItem
                    x:Name="DndMenuItem"
                    Content="Do Not Disturb"
                    Icon="DisconnectDrive"
                    Tag="DND" />
                <NavigationViewItem
                    x:Name="StatusMenuItem"
                    Content="Status"
                    Icon="Flag"
                    Tag="Status" />
                <NavigationViewItem
                    x:Name="FeedbackMenuItem"
                    Content="Feedback"
                    Icon="Comment"
                    Tag="Feedback" />
            </NavigationView.FooterMenuItems>

            <!--  Content Area (Right Pane)  -->
            <Grid x:Name="ContentArea" Margin="24,24,24,24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Header Section  -->
                <StackPanel
                    x:Name="ContentHeader"
                    Grid.Row="0"
                    Margin="0,0,0,24">
                    <TextBlock
                        x:Name="ContentTitle"
                        Margin="0,0,0,8"
                        Style="{StaticResource TitleTextBlockStyle}"
                        Text="Welcome to INotify" />
                    <TextBlock
                        x:Name="ContentSubtitle"
                        Foreground="{ThemeResource SystemColorGrayTextBrush}"
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        Text="Select a category from the menu to get started" />
                </StackPanel>

                <Grid x:Name="ContentContainer" Grid.Row="1">
                    <!--  Priority Board View (Initially Hidden)  -->
                    <Grid x:Name="PriorityBoardView" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!--  High Priority Column  -->
                        <Grid
                            Grid.Column="0"
                            Margin="0,0,12,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="High Priority" />

                                <Button
                                    x:Name="AddHighPriorityBtn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToPriority_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="High">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="HighPriorityFlyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="HighPriorityAppSelector"
                                                CurrentTargetType="Priority"
                                                SelectionTypeId="High" />
                                        </Flyout>

                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="HighPriorityListControl"
                                Grid.Row="1"
                                CurrentTargetType="Priority"
                                SelectionTargetId="High"
                                Visibility="{x:Bind PriorityBoardView.Visibility, Mode=OneWay}" />

                        </Grid>

                        <!--  Medium Priority Column  -->
                        <Grid
                            Grid.Column="1"
                            Margin="6,0,6,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="Medium Priority" />

                                <Button
                                    x:Name="AddMediumPriorityBtn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToPriority_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="Medium">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="MediumPriorityFlyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="MediumPriorityAppSelector"
                                                CurrentTargetType="Priority"
                                                SelectionTypeId="Medium" />
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="MediumPriorityListControl"
                                Grid.Row="1"
                                CurrentTargetType="Priority"
                                SelectionTargetId="Medium"
                                Visibility="{x:Bind PriorityBoardView.Visibility, Mode=OneWay}" />
                        </Grid>

                        <!--  Low Priority Column  -->
                        <Grid
                            Grid.Column="2"
                            Margin="12,0,0,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="Low Priority" />

                                <Button
                                    x:Name="AddLowPriorityBtn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToPriority_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="Low">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="LowPriorityFlyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="LowPriorityAppSelector"
                                                CurrentTargetType="Priority"
                                                SelectionTypeId="Low" />
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="LowPriorityListControl"
                                Grid.Row="1"
                                CurrentTargetType="Priority"
                                SelectionTargetId="Low"
                                Visibility="{x:Bind PriorityBoardView.Visibility, Mode=OneWay}" />
                        </Grid>
                    </Grid>

                    <!--  Space Board View (Initially Hidden)  -->
                    <Grid x:Name="SpaceBoardView" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!--  Space 1 Column  -->
                        <Grid
                            Grid.Column="0"
                            Margin="0,0,12,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="Space 1" />

                                <Button
                                    x:Name="AddSpace1Btn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToSpace_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="Space1">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="Space1Flyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="Space1AppSelector"
                                                CurrentTargetType="Space"
                                                SelectionTypeId="Space1" />
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="Space1ListControl"
                                Grid.Row="1"
                                CurrentTargetType="Space"
                                SelectionTargetId="Space1"
                                Visibility="{x:Bind SpaceBoardView.Visibility, Mode=OneWay}" />
                        </Grid>

                        <!--  Space 2 Column  -->
                        <Grid
                            Grid.Column="1"
                            Margin="6,0,6,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="Space 2" />

                                <Button
                                    x:Name="AddSpace2Btn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToSpace_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="Space2">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="Space2Flyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="Space2AppSelector"
                                                CurrentTargetType="Space"
                                                SelectionTypeId="Space2" />
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="Space2ListControl"
                                Grid.Row="1"
                                CurrentTargetType="Space"
                                SelectionTargetId="Space2"
                                Visibility="{x:Bind SpaceBoardView.Visibility, Mode=OneWay}" />
                        </Grid>

                        <!--  Space 3 Column  -->
                        <Grid
                            Grid.Column="2"
                            Margin="12,0,0,0"
                            Padding="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Text="Space 3" />

                                <Button
                                    x:Name="AddSpace3Btn"
                                    Grid.Column="1"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Right"
                                    Click="AddToSpace_Click"
                                    Content="+ Add Apps"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Tag="Space3">
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="Space3Flyout"
                                            FlyoutPresenterStyle="{StaticResource CustomFlyoutPresenter}"
                                            Placement="Bottom">
                                            <controls:AppSelectionFlyoutControl
                                                x:Name="Space3AppSelector"
                                                CurrentTargetType="Space"
                                                SelectionTypeId="Space3" />
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Grid>

                            <view1:NotificationListControl
                                x:Name="Space3ListControl"
                                Grid.Row="1"
                                CurrentTargetType="Space"
                                SelectionTargetId="Space3"
                                Visibility="{x:Bind SpaceBoardView.Visibility, Mode=OneWay}" />
                        </Grid>
                    </Grid>

                    <!--  Detail List View (Initially Hidden)  -->
                    <Grid x:Name="DetailListView" Visibility="Collapsed">

                        <view1:NotificationListControl
                            x:Name="DetailListViewContent"
                            CurrentTargetType="Space"
                            SelectionTargetId="Space3" />

                    </Grid>

                    <!--  All Apps View (Initially Hidden)  -->
                    <Grid x:Name="AllAppsView" Visibility="Collapsed">
                        <view1:AllPackageControl />
                    </Grid>

                    <!--  All Notifications View (Initially Hidden)  -->
                    <Grid x:Name="AllNotificationsView" Visibility="Collapsed">
                        <!--  This will be populated with the existing KToastListViewControl  -->
                        <view:KToastListControl x:Name="KToastListViewControl" />
                    </Grid>

                    <!--  DND Control View (Initially Hidden)  -->
                    <Grid x:Name="DndControlView" Visibility="Collapsed">
                        <StackPanel Spacing="16">
                            <TextBlock Style="{StaticResource SubheaderTextBlockStyle}" Text="Do Not Disturb Settings" />

                            <StackPanel Spacing="8">
                                <TextBlock
                                    x:Name="DndStatusText"
                                    FontWeight="SemiBold"
                                    Text="Loading DND status..." />

                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Button
                                        x:Name="ToggleDndButton"
                                        Click="ToggleDnd_Click"
                                        Content="Toggle DND" />
                                    <Button
                                        x:Name="SetAlarmsOnlyButton"
                                        Click="SetAlarmsOnly_Click"
                                        Content="Alarms Only" />
                                    <Button
                                        x:Name="ShowDndStatusButton"
                                        Click="ShowDndStatus_Click"
                                        Content="Show Status" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!--  Status View (Initially Hidden)  -->
                    <Grid x:Name="StatusView" Visibility="Collapsed">
                        <StackPanel Spacing="16">
                            <TextBlock Style="{StaticResource SubheaderTextBlockStyle}" Text="System Status" />

                            <StackPanel Spacing="8">
                                <TextBlock x:Name="TotalNotificationsText" Text="Total Notifications: 0" />
                                <TextBlock x:Name="PriorityAppsCountText" Text="Priority Apps: 0" />
                                <TextBlock x:Name="ActiveSpacesText" Text="Active Spaces: 0" />
                            </StackPanel>

                            <Button Click="Diagnostics_Click" Content="Open Diagnostics" />
                        </StackPanel>
                    </Grid>

                    <!--  Feedback View (Initially Hidden)  -->
                    <Grid x:Name="FeedbackView" Visibility="Collapsed">
                        <view1:FeedbackControl />
                    </Grid>
                </Grid>


                <!--  Main Content Area  -->
                <ScrollViewer
                    x:Name="MainContentScrollViewer"
                    Grid.Row="1"
                    HorizontalScrollBarVisibility="Auto"
                    HorizontalScrollMode="Auto"
                    VerticalScrollBarVisibility="Auto"
                    VerticalScrollMode="Auto"
                    Visibility="Collapsed"
                    ZoomMode="Disabled">

                    <!--  Content Container Grid  -->

                </ScrollViewer>
            </Grid>
        </NavigationView>
    </Grid>
</Window>