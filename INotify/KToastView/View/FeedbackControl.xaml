<UserControl
    x:Class="INotify.View.FeedbackControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:INotify.View"
    xmlns:converters="using:INotify.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converters:EnumToIntConverter x:Key="EnumToIntConverter"/>
        <converters:BoolNegationConverter x:Key="BoolNegationConverter"/>
        <converters:SubmitTextConverter x:Key="SubmitTextConverter"/>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollMode="Auto" VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="20" Margin="24">
            <!-- Header Section -->
            <StackPanel Spacing="8">
                <TextBlock Text="Submit Feedback" 
                          Style="{StaticResource TitleTextBlockStyle}"/>
                <TextBlock Text="Help us improve INotify by sharing your feedback, reporting bugs, or suggesting new features."
                          Style="{StaticResource BodyTextBlockStyle}"
                          TextWrapping="WrapWholeWords"/>
            </StackPanel>

            <!-- Status Message -->
            <InfoBar x:Name="StatusInfoBar"
                    IsOpen="False"
                    Message="Feedback status will appear here"
                    Severity="Success"
                    IsClosable="True"/>

            <!-- Feedback Form -->
            <StackPanel Spacing="16">
                <!-- Category Selection -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Category *" 
                              Style="{StaticResource CaptionTextBlockStyle}"/>
                    <ComboBox x:Name="CategoryComboBox"
                             HorizontalAlignment="Stretch"
                             SelectedIndex="2">
                        <ComboBoxItem Content="Bug Report"/>
                        <ComboBoxItem Content="Feature Request"/>
                        <ComboBoxItem Content="General Feedback"/>
                        <ComboBoxItem Content="Performance Issue"/>
                        <ComboBoxItem Content="UI/UX Feedback"/>
                        <ComboBoxItem Content="Documentation"/>
                    </ComboBox>
                </StackPanel>

                <!-- Title Input -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Title *" 
                              Style="{StaticResource CaptionTextBlockStyle}"/>
                    <TextBox x:Name="TitleTextBox"
                            PlaceholderText="Brief summary of your feedback"
                            MaxLength="200"/>
                </StackPanel>

                <!-- Email Input -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Email (optional)" 
                              Style="{StaticResource CaptionTextBlockStyle}"/>
                    <TextBox x:Name="EmailTextBox"
                            PlaceholderText="your.email@example.com"
                            InputScope="EmailNameOrAddress"/>
                    <TextBlock Text="We'll use this to follow up on your feedback if needed."
                              Style="{StaticResource CaptionTextBlockStyle}"
                              FontStyle="Italic"/>
                </StackPanel>

                <!-- Message Input -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Message *" 
                              Style="{StaticResource CaptionTextBlockStyle}"/>
                    <TextBox x:Name="MessageTextBox"
                            PlaceholderText="Please provide detailed information about your feedback..."
                            AcceptsReturn="True"
                            TextWrapping="Wrap"
                            Height="150"
                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                            MaxLength="2000"/>
                </StackPanel>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" 
                           Spacing="12" 
                           HorizontalAlignment="Right"
                           Margin="0,16,0,0">
                    <Button x:Name="ClearButton"
                           Content="Clear"
                           Click="ClearButton_Click"/>
                    
                    <Button x:Name="SubmitButton"
                           Content="Submit Feedback"
                           Style="{StaticResource AccentButtonStyle}"
                           Click="SubmitButton_Click"/>
                </StackPanel>

                <!-- Form Validation Info -->
                <TextBlock Text="* Required fields"
                          Style="{StaticResource CaptionTextBlockStyle}"
                          HorizontalAlignment="Right"
                          FontStyle="Italic"/>
            </StackPanel>

            <!-- Tips Section -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                   CornerRadius="8"
                   Padding="16"
                   Margin="0,24,0,0">
                <StackPanel Spacing="12">
                    <TextBlock Text="?? Tips for better feedback:"
                              Style="{StaticResource SubtitleTextBlockStyle}"/>
                    <StackPanel Spacing="6">
                        <TextBlock Text="• Be specific about the issue or suggestion"
                                  Style="{StaticResource BodyTextBlockStyle}"/>
                        <TextBlock Text="• Include steps to reproduce bugs"
                                  Style="{StaticResource BodyTextBlockStyle}"/>
                        <TextBlock Text="• Mention your device and OS version for technical issues"
                                  Style="{StaticResource BodyTextBlockStyle}"/>
                        <TextBlock Text="• Check if the issue persists after restarting the app"
                                  Style="{StaticResource BodyTextBlockStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>